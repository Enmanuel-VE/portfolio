---
	import type { CertificateType } from '../../data/certificates';
	import ButtonCard from '../atoms/ButtonCard.astro';
	import TitleCard from '../atoms/TitleCard.astro';
	import { Image } from 'astro:assets';

	type Props = Pick<
		CertificateType,
		'institution' | 'url' | 'title' | 'date' | 'image'
	>;

	const dateFormat = new Intl.DateTimeFormat('es-VE', {
		month: 'short',
		year: 'numeric',
	});

	const completedDateFormat = new Intl.DateTimeFormat('es-VE', {
		month: 'numeric',
		day: 'numeric',
		year: 'numeric',
	});

	const props = Astro.props;
---
<article
	class="relative overflow-hidden border border-[rgb(25,0,35)] dark:border-rose-500/40 bg-white dark:bg-[rgb(25,0,35)] group flex flex-col justify-between text-white  w-full h-full rounded-3xl"
>
	<div class="absolute inset-0 z-0">
		<Image
			loading="lazy"
			class="w-full h-full object-cover opacity-35 scale-115 transition-transform duration-300 ease-in-out group-hover:scale-120"
			src={props.image}
			alt="Imagen del Certificado"
		/>
	</div>

	<div
		title={`Certificado de ${props.title}`}
		class="absolute inset-0 z-[5] bg-gradient-to-t from-white dark:from-[rgb(25,0,35)] dark:from-black/70 via-transparent to-white dark:to-[rgb(25,0,35)] dark:to-black/70"
	></div>

	<header class="flex flex-row items-center gap-4 p-4 z-10">
		<a
			target="_blank"
			rel="noopener noreferrer"
			title={props.institution.name}
			href={props.institution.url}
		>
			<Image
				loading="lazy"
				class="w-6 h-6 aspect-square"
				src={props.institution.logo}
				alt={props.institution.name}
			/>
		</a>

		<div class="flex flex-col">
			<TitleCard url={props.url} title={props.title}/>
			<p
				title={completedDateFormat.format(props.date)}
				class="text-sm text-black/75 dark:text-white/75"
			>
				{dateFormat.format(props.date)}
			</p>
		</div>
	</header>

	<footer class="flex flex-row items-center gap-2 p-4 z-10">
		<ButtonCard
			href={props.url}
			title="Ver el certificado del curso"
			label="Ver certificado"
		/>
	</footer>
</article>
